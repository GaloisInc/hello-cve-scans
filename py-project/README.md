# Python CVE Scanning
## Alternatives

There are quite a few possibilities for Python CVE scanning,
these were some of the choices we checked out:

Some of the top choices we explored were
  - safety, https://pypi.org/project/safety/; front end to a
    commercial product, see  https://docs.safetycli.com.

  - snyk, https://docs.snyk.io/; another commercial project although
    free for single developer & small teams; it felt a bit complex
    for our purposes.

Two open source tools are

  - cve-py https://pypi.org/project/cve-py/.  This is a library,
    potentially a good choice if we needed more control.

  - pip-audit https://pypi.org/project/pip-audit/ (source here
    https://github.com/pypa/pip-audit ).  There are many resources
    describing `pip-audit`, it seems to have high use, is actively
    maintained (in part by Trail of Bits), and is well documented.

We chose to use `pip-audit` for the reasons above; it provides a high
utility command-line tool, which has been sufficient for our purposes.

## Installing pip-audit

This gives a vanilla install:
```
pip install pip-audit
```

## Running pip-audit

Refer to the documentation, a couple features to note:
 - `pip-audit` has an official GitHub Action.
 - The `--ignore-vuln ID` option (less useful if we use the approach
   described in the top level [README.md](../README.md)).

`pip-audit` searches the provided path for various Python "project"
files, at the moment, only pyproject.toml is supported.  However, is
not the most reliable way to use it.  We want to generate a
`requirements.txt` file and we can point `pip-audit` to that file.

To run pip-audit on our small python project here, do
```
pip-audit --requirement ./requirements.txt
```
which results in
```
Found 3 known vulnerabilities in 3 packages
Name     Version  ID                  Fix Versions
-------- -------- ------------------- -------------
certifi  2024.6.2 GHSA-248v-346w-9cwc 2024.7.4
requests 2.31.0   GHSA-9wx4-h78v-vm56 2.32.0
urllib3  2.1.0    GHSA-34jh-p97f-mpxf 1.26.19,2.2.2
```

This invocation included "dependency resolution" (note comments in
[requirements.txt](requirements.txt)); and thus it found   To turn this off, we could use
the flag `--no-deps`.

## Testing/Running Hello

```
pip install -e .
python src/python_project_boilerplate/main.py
```

## Using with Poetry

The pip-audit tool does not directly support poetry, but if you are
using poetry, you can generate a `requirements.txt` file then apply
pip-audit on the same.  Do the following in a python project directory
(that poetry can be run in):

```
poetry export -frequirements.txt -o requirements.txt
pip-audit -r ./requirements.txt
```
